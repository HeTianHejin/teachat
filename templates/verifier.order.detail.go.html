{{ define "content" }}

{{/* 茶订单详情页面 */}}

<ol class="breadcrumb">
  <li><a href="/v1/">大堂</a></li>
  <li><a href="/v1/verifier/workspace">见证工作间</a></li>
  <li class="active">茶订单详情</li>
</ol>

<div class="page-header">
  <h1><i class="bi-eye"></i> 茶订单详情</h1>
  <p class="lead">查看茶订单的完整信息和见证日志。</p>
</div>

{{ template "component_tea_order_bean" .TeaOrderBean }}

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><i class="bi-journal-text"></i> 见证日志</h3>
  </div>
  <div class="panel-body">
    {{ if .WitnessLogs }}
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>操作类型</th>
          <th>原因</th>
          <th>操作时间</th>
        </tr>
      </thead>
      <tbody>
        {{ range .WitnessLogs }}
        <tr>
          <td>
            <span class="label label-{{ if eq .Action "审批" }}success{{ else if eq .Action "暂停" }}warning{{ else if eq .Action "恢复" }}info{{ else }}danger{{ end }}">
              {{ .Action }}
            </span>
          </td>
          <td>{{ .Reason }}</td>
          <td>{{ .WitnessAt.Format "2006-01-02 15:04:05" }}</td>
        </tr>
        {{ end }}
      </tbody>
    </table>
    {{ else }}
    <div class="alert alert-info">
      <i class="bi-info-circle"></i> 暂无见证日志。
    </div>
    {{ end }}
  </div>
</div>

{{ if eq .TeaOrderBean.TeaOrder.Status "pending" }}
<div class="panel panel-success">
  <div class="panel-body">
    <div class="btn-group btn-group-justified">
      <a href="/v1/verifier/order/approve?uuid={{ .TeaOrderBean.TeaOrder.Uuid }}" class="btn btn-success">
        <i class="bi-check-circle"></i> 审批通过
      </a>
      <a href="/v1/verifier/order/reject?uuid={{ .TeaOrderBean.TeaOrder.Uuid }}" class="btn btn-danger">
        <i class="bi-x-circle"></i> 拒绝订单
      </a>
    </div>
  </div>
</div>
{{ end }}

{{ if or (eq .TeaOrderBean.TeaOrder.Status "active") (eq .TeaOrderBean.TeaOrder.Status "pause") }}
<div class="panel panel-warning">
  <div class="panel-body">
    <div class="btn-group btn-group-justified">
      {{ if eq .TeaOrderBean.TeaOrder.Status "active" }}
      <a href="/v1/verifier/order/pause?uuid={{ .TeaOrderBean.TeaOrder.Uuid }}" class="btn btn-warning">
        <i class="bi-pause-circle"></i> 暂停订单
      </a>
      {{ end }}
      <a href="/v1/verifier/order/cancel?uuid={{ .TeaOrderBean.TeaOrder.Uuid }}" class="btn btn-danger">
        <i class="bi-x-circle"></i> 终止订单
      </a>
    </div>
  </div>
</div>
{{ end }}

<div class="panel panel-default">
  <div class="panel-body">
    <a href="/v1/verifier/workspace" class="btn btn-default btn-lg">
      <i class="bi-arrow-left"></i> 返回工作间
    </a>
  </div>
</div>

{{ end }}
