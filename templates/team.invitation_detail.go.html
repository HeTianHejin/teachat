{{ define "content" }}
{{/* 团队管理员视角，查看邀请函详情页面 */}}

<ol class="breadcrumb">
    <li><a href="/v1/">大堂</a></li>
    <li><a href="/v1/team/detail?uuid={{ .InvitationBean.Team.Uuid }}">{{ .InvitationBean.Team.Name }}</a></li>
    <li><a href="/v1/team/invitations?uuid={{ .InvitationBean.Team.Uuid }}">全部邀请函</a></li>
    <li class="active">邀请函详情</li>
</ol>

<div class="media">
    <div class="media-left">
        <a href="/v1/team/detail?uuid={{ .InvitationBean.Team.Uuid }}">
            <img class="media-object" src="/v1/static/image/user/{{ .InvitationBean.Team.Logo }}.jpeg" alt="团队团标">
        </a>
    </div>

    <div class="media-body">
        <div class="panel panel-info">

            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <a href="/v1/team/detail?uuid={{ .InvitationBean.Team.Uuid }}">{{ .InvitationBean.Team.Name }}</a>
                    </div>

                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <span style="display: block; font-size: smaller;text-align: center;">
                            {{ .InvitationBean.Team.CreatedAtDate }}
                        </span>
                    </div>

                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <span style="display: block; text-align: right;">
                            <span class="label label-success">{{ .InvitationBean.Team.TeamProperty }}
                            </span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="panel-body">
                <h4 class="text-center">加盟邀请函</h4>
                
                <!-- 邀请函状态 -->
                <div style="margin-bottom: 15px; padding: 10px; background-color: #f5f5f5; border-radius: 4px;">
                    <strong><i class="glyphicon glyphicon-info-sign"></i> 邀请函状态：</strong>
                    <span class="label {{ if eq .InvitationBean.Invitation.Status 0 }}label-warning{{ else if eq .InvitationBean.Invitation.Status 1 }}label-info{{ else if eq .InvitationBean.Invitation.Status 2 }}label-success{{ else if eq .InvitationBean.Invitation.Status 3 }}label-danger{{ else }}label-default{{ end }}">
                        {{ .InvitationBean.Invitation.GetStatus }}
                    </span>
                </div>

                <!-- 受邀人信息 -->
                <div style="margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-radius: 4px;">
                    <strong><i class="glyphicon glyphicon-user"></i> 受邀人邮箱：</strong>
                    <span style="font-style: italic;">{{ .InvitationBean.Invitation.InviteEmail }}</span>
                </div>

                <!-- 拟邀请角色 -->
                <div style="margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-radius: 4px;">
                    <strong><i class="glyphicon glyphicon-briefcase"></i> 拟邀请角色：</strong>
                    <span class="label label-primary">{{ .InvitationBean.Invitation.Role }}</span>
                </div>
                
                <p>
                    致 <strong>{{ .InvitationBean.InviteUser.Name }}</strong> 茶友：
                </p>
                <p style="white-space: pre-wrap; padding: 15px; background-color: #f9f9f9; border-left: 4px solid #5bc0de; border-radius: 4px;">
                    {{ .InvitationBean.Invitation.InviteWord }}
                </p>
                
                <p class="text-right">
                    邀请人：
                    <a href="/v1/user/biography?uuid={{ .InvitationBean.Author.Uuid }}">{{ .InvitationBean.Author.Name }}</a>
                    {{if .InvitationBean.Author.Gender }}
                    <i class="bi-gender-male" style="font-size: 1.2rem; color: cornflowerblue;"></i>
                    {{ else }}
                    <i class="bi-gender-female" style="font-size: 1.2rem; color:hotpink;"></i>
                    {{ end }}
                </p>
                <p class="text-right">
                    {{ .InvitationBean.Invitation.CreatedAtDate }}
                </p>
                
            </div>

        </div>
    </div>
</div>

{{/* 如果邀请函已被处理（状态>=2），显示答复信息 */}}
{{ if ge .InvitationBean.Invitation.Status 2 }}
<div class="panel panel-default" style="margin-top: 20px;">
    <div class="panel-heading" style="background-color: {{ if eq .InvitationBean.Invitation.Status 2 }}#dff0d8{{ else if eq .InvitationBean.Invitation.Status 3 }}#f2dede{{ else }}#f5f5f5{{ end }};">
        <h4 style="margin: 0;">
            <i class="glyphicon glyphicon-{{ if eq .InvitationBean.Invitation.Status 2 }}ok-sign{{ else if eq .InvitationBean.Invitation.Status 3 }}remove-sign{{ else }}info-sign{{ end }}"></i>
            受邀人答复
        </h4>
    </div>
    <div class="panel-body">
        <!-- 答复状态 -->
        <div style="margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-left: 4px solid {{ if eq .InvitationBean.Invitation.Status 2 }}#5cb85c{{ else if eq .InvitationBean.Invitation.Status 3 }}#d9534f{{ else }}#5bc0de{{ end }}; border-radius: 4px;">
            <strong><i class="glyphicon glyphicon-flag"></i> 答复状态：</strong>
            <span class="label {{ if eq .InvitationBean.Invitation.Status 2 }}label-success{{ else if eq .InvitationBean.Invitation.Status 3 }}label-danger{{ else }}label-default{{ end }}">
                {{ .InvitationBean.Invitation.GetStatus }}
            </span>
        </div>
        
        {{/* 展示邀请函回复 */}}
        {{ if .Reply.ReplyWord }}
        <p style="color: #666;">
            <strong><i class="glyphicon glyphicon-comment"></i> 答复内容：</strong>
        </p>
        <p style="white-space: pre-wrap; padding: 15px; background-color: #f9f9f9; border-left: 4px solid {{ if eq .InvitationBean.Invitation.Status 2 }}#5cb85c{{ else }}#d9534f{{ end }}; border-radius: 4px;">
            {{ .Reply.ReplyWord }}
        </p>
        <p class="text-right" style="font-size: smaller; color: #999;">
            答复时间：{{ .Reply.CreatedAtDate }}
        </p>
        {{ else }}
        <p style="color: #999; font-style: italic;">暂无答复内容</p>
        {{ end }}
        
    </div>
</div>
{{ end }}

<div style="margin-top: 20px; text-align: center;">
    <a href="/v1/team/invitations?uuid={{ .InvitationBean.Team.Uuid }}" class="btn btn-default">
        <i class="glyphicon glyphicon-arrow-left"></i> 返回邀请函列表
    </a>
</div>

{{ end }}
