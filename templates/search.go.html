{{ define "content"}}

{{/* è¿™æ˜¯æŸ¥æ‰¾é¡µé¢ */}}

<div class="well">
  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"> </span>
  èŒ¶åšå£«ï¼šå¦‚æœçŸ¥é“å¯¹åº”çš„ç¼–å·æ•°ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šæ›´å¿«ã€‚å¯ä»¥ç”¨é‚®ç®±ä»£æ›¿èŠ±åæŸ¥æ‰¾èŒ¶å‹ã€‚
</div>

<script>
function switchCategory(category) {
  var hint = document.getElementById('select-hint');
  if (hint) hint.style.display = 'none';
  
  var groups = ['person', 'org', 'activity', 'resource'];
  for (var i = 0; i < groups.length; i++) {
    var groupDiv = document.getElementById('types-' + groups[i]);
    if (groupDiv) {
      if (groups[i] === category) {
        groupDiv.style.display = 'block';
        var inputs = groupDiv.getElementsByTagName('input');
        if (inputs.length > 0) {
          inputs[0].checked = true;
          for (var j = 0; j < inputs.length; j++) {
            inputs[j].required = true;
          }
        }
      } else {
        groupDiv.style.display = 'none';
        var inputs = groupDiv.getElementsByTagName('input');
        for (var j = 0; j < inputs.length; j++) {
          inputs[j].checked = false;
          inputs[j].required = false;
        }
      }
    }
  }
}
</script>

<form role="form" action="/v1/search" method="post">

  <div class="panel-body form-group">

    <div>
      <label>é€‰æ‹©å¤§ç±»ï¼š</label>
      <fieldset id="category-level1" style="margin-bottom: 1rem;">
        <input type="radio" name="category" id="cat-person" value="person" required style="width: fit-content;" onchange="switchCategory('person')" />
        <label for="cat-person">ğŸ‘¤ äººå‘˜</label>

        <input type="radio" name="category" id="cat-org" value="org" required style="width: fit-content;" onchange="switchCategory('org')" />
        <label for="cat-org">ğŸ  ç»„ç»‡</label>

        <input type="radio" name="category" id="cat-activity" value="activity" required style="width: fit-content;" onchange="switchCategory('activity')" />
        <label for="cat-activity">ğŸµ æ´»åŠ¨</label>

        <input type="radio" name="category" id="cat-resource" value="resource" required style="width: fit-content;" onchange="switchCategory('resource')" />
        <label for="cat-resource">ğŸ“¦ èµ„æº</label>
      </fieldset>
    </div>

    <div>
      <label for="radio">é€‰æ‹©å…·ä½“ç±»å‹ï¼š</label>
      <div id="select-hint" style="color: #999; font-style: italic;">è¯·å…ˆé€‰æ‹©å¤§ç±»</div>
      <fieldset id="category-level2">
        <!-- äººå‘˜ç±» -->
        <div id="types-person" class="type-group" style="display: none;">
          <input type="radio" name="class" id="user" value="0" style="width: fit-content;" />
          <label for="user">èŒ¶å‹èŠ±å</label>

          <input type="radio" name="class" id="user_id" value="10" style="width: fit-content;" />
          <label for="user_id">èŒ¶å‹èŒ¶å·</label>
        </div>

        <!-- ç»„ç»‡ç±» -->
        <div id="types-org" class="type-group" style="display: none;">
          <input type="radio" name="class" id="family" value="13" style="width: fit-content;" />
          <label for="family">å®¶åº­åç§°</label>

          <input type="radio" name="class" id="team" value="1" style="width: fit-content;" />
          <label for="team">å›¢é˜Ÿç®€ç§°</label>
        </div>

        <!-- æ´»åŠ¨ç±» -->
        <div id="types-activity" class="type-group" style="display: none;">
          <input type="radio" name="class" id="thread" value="2" style="width: fit-content;" />
          <label for="thread">èŒ¶è®®æ ‡é¢˜</label>

          <input type="radio" name="class" id="objective" value="3" style="width: fit-content;" />
          <label for="objective">èŒ¶ä¼šåç§°</label>

          <input type="radio" name="class" id="project" value="4" style="width: fit-content;" />
          <label for="project">èŒ¶å°åç§°</label>

          <input type="radio" name="class" id="place" value="5" style="width: fit-content;" />
          <label for="place">åœ°ç‚¹åç§°</label>
        </div>

        <!-- èµ„æºç±» -->
        <div id="types-resource" class="type-group" style="display: none;">
          <input type="radio" name="class" id="goods" value="9" style="width: fit-content;" />
          <label for="goods">ç‰©èµ„</label>

          <input type="radio" name="class" id="skill" value="11" style="width: fit-content;" />
          <label for="skill">æŠ€èƒ½</label>

          <input type="radio" name="class" id="magic" value="12" style="width: fit-content;" />
          <label for="magic">æ³•åŠ›</label>

          <input type="radio" name="class" id="environment" value="6" style="width: fit-content;" />
          <label for="environment">ç¯å¢ƒæ¡ä»¶</label>

          <input type="radio" name="class" id="hazard" value="7" style="width: fit-content;" />
          <label for="hazard">å®‰å…¨éšæ‚£</label>

          <input type="radio" name="class" id="risk" value="8" style="width: fit-content;" />
          <label for="risk">ä½œä¸šé£é™©</label>
        </div>
      </fieldset>
    </div>

    <div class="form-group" style="margin-top: 1rem;">
      <label for="keyword"></label>
      <input type="text" class="form-control" name="keyword" id="keyword" minlength="1" maxlength="32" required
        autofocus>
    </div>

    <div class="form-group">

      <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">

        <button class="btn btn-default pull-right" type="submit">æŸ¥èŒ¶</button>
      </div>

    </div>

  </div>
</form>

{{ if .IsEmpty }}
<hr />
<p>æŸ¥åˆ° 0 ä¸ªè®°å½•ã€‚</p>
<hr />

{{ else }}{{/* ä»¥ä¸‹æ˜¯æŸ¥æ‰¾ç»“æœéé›¶ */}}

{{ range .UserBeanSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾ç”¨æˆ·ï¼ˆèŒ¶å‹ï¼‰ç»“æœå±•ç¤º */}}

<div class="media">
  <div class="media-left">
    {{ template "component_avatar_name_gender" .User }}
  </div>
  <div class="media-body">
    <span style="font-style: italic;">
      ï¼ˆ<a href="/v1/family/detail?id={{ .DefaultFamily.Uuid }}">{{ .DefaultFamily.Name }}</a>,
      <a href="/v1/team/detail?uuid={{ .DefaultTeam.Uuid }}">{{ .DefaultTeam.Abbreviation }}</a>ï¼‰
    </span>
    </p>
    <p>èŒ¶å‹å·ï¼š{{ .User.Id }}</p>
    <p>é‚® ç®±ï¼š{{ .User.Email }}</p>

  </div>
</div>

<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾ç”¨æˆ·ï¼ˆèŒ¶å‹ï¼‰ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{ range .FamilyBeanSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾å®¶åº­ç»“æœå±•ç¤º */}}
{{ template "component_family" . }}
<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„å®¶åº­ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{ range .TeamBeanSlice }}
{{/* è¿™æ˜¯æŸ¥æ‰¾èŒ¶å›¢ï¼ˆäº‹ä¸šå›¢é˜Ÿï¼‰ç»“æœå±•ç¤º */}}
{{ template "component_team" . }}
<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„èŒ¶å›¢ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{/* ä»¥ä¸‹æ˜¯æŸ¥è¯¢ç»“æœï¼ŒèŒ¶è®®çš„ç®€è¦å±•ç¤º */}}
{{ range .ThreadBeanSlice }}
{{ template "component_thread_bean" . }}
<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„èŒ¶å°ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{/* ä»¥ä¸‹æ˜¯æŸ¥è¯¢ç»“æœï¼ŒèŒ¶å°çš„ç®€è¦å±•ç¤º */}}
{{ range .ProjectBeanSlice }}
{{ template "component_project_bean" . }}
<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„èŒ¶å°ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{/* ä»¥ä¸‹æ˜¯æŸ¥è¯¢ç»“æœï¼ŒèŒ¶ä¼šï¼ˆèŒ¶å›´ï¼‰çš„ç®€è¦å±•ç¤º */}}
{{ range .ObjectiveBeanSlice }}
{{ template "component_objective_bean" . }}
<hr />
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„èŒ¶ä¼šï¼ˆèŒ¶å›´ï¼‰ç»“æœé˜Ÿåˆ—è¿­ä»£ç»“æŸ */}}

{{ range .PlaceSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ å“èŒ¶åœ°ç‚¹ ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
{{ template "component_place" . }}
<div style="margin: 1rem;">
  {{/* æ˜¾ç¤ºæ”¶è—åŠŸèƒ½æŒ‰é’®  */}}
  <a class="btn btn-default" href="/v1/place/collect?id={{ .Id }}" role="button">
    <i class="bi-pencil-square" style="font-size: 1.5rem; color: green;"></i>
    ä¸€é”®æ”¶è—</a>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ å“èŒ¶åœ°ç‚¹ ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{ range .EnvironmentSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ ç¯å¢ƒæ¡ä»¶ ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>ç¯å¢ƒæ¡ä»¶ #{{ .Id }}</strong> - {{ .Name }}
    <a href="/v1/environment/detail?id={{ .Id }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <p>{{ .Summary }}</p>
    <small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small>
  </div>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ ç¯å¢ƒæ¡ä»¶ ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{ range .HazardSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ å®‰å…¨éšæ‚£ ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>å®‰å…¨éšæ‚£ #{{ .Id }}</strong> - {{ .Name }}
    <span
      class="label label-{{ if eq .Severity 5 }}danger{{ else if eq .Severity 4 }}warning{{ else if eq .Severity 3 }}info{{ else }}default{{ end }}">
      {{ .SeverityName }}
    </span>
    <span class="label label-default">{{ .CategoryName }}</span>
    <a href="/v1/hazard/detail?id={{ .Id }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <p>{{ .Description }}</p>
    {{ if .Keywords }}
    <p><strong>å…³é”®è¯ï¼š</strong>{{ .Keywords }}</p>{{ end }}
    {{ if .Source }}
    <p><strong>æ¥æºï¼š</strong>{{ .Source }}</p>{{ end }}
    <small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small>
  </div>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ å®‰å…¨éšæ‚£ ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{ range .RiskSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ ä½œä¸šé£é™© ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>ä½œä¸šé£é™© #{{ .Id }}</strong> - {{ .Name }}
    <span
      class="label label-{{ if eq .Severity 5 }}danger{{ else if eq .Severity 4 }}warning{{ else if eq .Severity 3 }}info{{ else }}default{{ end }}">
      {{ RiskSeverityLevelString .Severity }}
    </span>
    {{ if .Source }}<span class="label label-default">{{ .Source }}</span>{{ end }}
    <a href="/v1/risk/detail?id={{ .Id }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <p>{{ .Description }}</p>
    {{ if .Keywords }}
    <p><strong>å…³é”®è¯ï¼š</strong>{{ .Keywords }}</p>{{ end }}
    {{ if .Nickname }}
    <p><strong>åˆ«åï¼š</strong>{{ .Nickname }}</p>{{ end }}
    <small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small>
  </div>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ ä½œä¸šé£é™© ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{/* ç‰©èµ„æœç´¢ç»“æœå±•ç¤º */}}
{{ range .GoodsSlice }}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>ç‰©èµ„ #{{ .Id }}</strong> - {{ .Name }}
    <a href="/v1/goods/detail?uuid={{ .Uuid }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <div class="media">
      <div class="media-left">
        <img class="media-object" src="/v1/static/bootstrap-icons/bag.svg" alt="goods" width="48" height="48">
      </div>
      <div class="media-body">
        <h4 class="media-heading">{{ .Name }} <small class="text-muted">{{ .Nickname }}</small></h4>
        <p>{{ .Applicability }}</p>
        {{ if gt .Price 0.0 }}
        <p>ä»·æ ¼ï¼šÂ¥{{ .Price }}</p>{{ end }}
        <p><small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small></p>
      </div>
    </div>
  </div>
</div>
{{ end }}

{{ range .SkillSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ æŠ€èƒ½ ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>æŠ€èƒ½ #{{ .Id }}</strong> - {{ .Name }}
    <span
      class="label label-{{ if eq .Category 2 }}primary{{ else if eq .Category 1 }}success{{ else }}default{{ end }}">
      {{ .CategoryString }}
    </span>
    <a href="/v1/skill/detail?id={{ .Id }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <p>{{ .Description }}</p>
    {{ if .Nickname }}
    <p><strong>åˆ«åï¼š</strong>{{ .Nickname }}</p>{{ end }}
    <p><strong>ä½“åŠ›ç­‰çº§ï¼š</strong>{{ .StrengthLevelString }}</p>
    <p><strong>éš¾åº¦ç­‰çº§ï¼š</strong>{{ .DifficultyLevelString }}</p>
    <small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small>
  </div>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ æŠ€èƒ½ ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{ range .MagicSlice }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ æ³•åŠ› ç»“æœé˜Ÿåˆ—è¿­ä»£-å¼€å§‹ */}}
<hr />
<div class="panel panel-default">
  <div class="panel-heading">
    <strong>æ³•åŠ› #{{ .Id }}</strong> - {{ .Name }}
    <span class="label label-{{ if eq .Category 2 }}warning{{ else if eq .Category 1 }}info{{ else }}default{{ end }}">
      {{ .CategoryString }}
    </span>
    <a href="/v1/magic/detail?id={{ .Id }}" class="btn btn-xs btn-info pull-right">
      <span class="glyphicon glyphicon-eye-open"></span> æŸ¥çœ‹è¯¦æƒ…
    </a>
  </div>
  <div class="panel-body">
    <p>{{ .Description }}</p>
    {{ if .Nickname }}
    <p><strong>åˆ«åï¼š</strong>{{ .Nickname }}</p>{{ end }}
    <p><strong>æ™ºåŠ›ç­‰çº§ï¼š</strong>{{ .IntelligenceLevelString }}</p>
    <p><strong>éš¾åº¦ç­‰çº§ï¼š</strong>{{ .DifficultyLevelString }}</p>
    <small class="text-muted">åˆ›å»ºæ—¶é—´ï¼š{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</small>
  </div>
</div>
{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾åˆ°çš„ æ³•åŠ› ç»“æœé˜Ÿåˆ—è¿­ä»£-ç»“æŸ */}}

{{ end }}{{/* è¿™æ˜¯æŸ¥æ‰¾ç»“æœéé›¶ ç»“æŸ*/}}

{{ end }}