{{ define "content" }}

<!--这是某个茶议（提议/主张）的详情-->

<ol class="breadcrumb">
  <li><a href="/v1/">大堂</a></li>
  <li><a href="/v1/objective/detail?id={{ .Thread.Objective.Uuid }}">{{ .Thread.Objective.Title }}@茶话会</a></li>
  <li><a href="/v1/project/detail?id={{ .Thread.Project.Uuid }}">{{ .Thread.Project.Title }}@茶台</a></li>
  <li class="active">{{ .Thread.Title }}@茶议 - 详情</li>
</ol>

<!--左右侧立场的人数比较-->
<div class="well" style="text-align: center;">
  <span>
    {{ .Thread.NumSupport }}
  </span>
  <span class="glyphicon glyphicon-hand-right" aria-hidden="true" style="margin-inline-end: 64px;"></span>

  <span class="glyphicon glyphicon-hand-left" aria-hidden="true"></span>
  {{ .Thread.NumOppose }}
</div>

<!--检查是否茶议作者，以决定头像显示在哪一侧布局-->
{{ if .Thread.PageData.IsAuthor }}
<!--右danger（红）左primary（蓝）品味进度条-->
<div class="progress">
  <div class="progress-bar progress-bar-primary progress-bar-striped active" aria-valuenow="{{.ProgressOppose}}"
    aria-valuemin="0" aria-valuemax="100" style="width: {{.ProgressOppose}}%;">
    <span class="sr-only">{{.ProgressOppose}}% 完成 (摇头)</span>
  </div>

  <div class="progress-bar progress-bar-danger progress-bar-striped active" aria-valuenow="{{.ProgressSupport}}"
    aria-valuemin="0" aria-valuemax="100" style="width: {{.ProgressSupport}}%;">
    <span class="sr-only">{{.ProgressSupport}}% 完成 (颔首)</span>
  </div>

</div>
<!-- 右红左蓝进度条到此为止 -->

<div class="media">
  <!-- [是茶议作者区域] 头像显示在右侧布局-->

  <div class="media-body">

    <div class="panel panel-success">

      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            {{ .Thread.CreatedAtDate }}
          </div>

          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <span style="display: block; text-align: center;">
              <span class="label label-default">{{ .Thread.Status }}
              </span>
            </span>

          </div>
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <span style="display: block;text-align: right;">
            {{ .Thread.User.Name }}
            </span>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <h4>{{ .Thread.TypeStatus }}: {{ .Thread.Title }}</h4>
        {{ .Thread.Body }}
      </div>

      <div class="panel-footer">
        <!--这是茶议表态人数-->
        <span class="glyphicon glyphicon-leaf" aria-hidden="true"></span>
        <span style="font-size: smaller; margin-inline-end: 30px;">
          {{ .Thread.NumReplies }}
        </span>

        {{ if .Thread.IsEdited }}
        <!--这是有编辑过（即补充内容）-->
        <span style="font-size: smaller; margin-inline-end: 30px;">
          <a href="/v1/thread/edit?id={{ .Thread.Uuid }}">
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          </a> {{ .Thread.EditAtDate }}
        </span>
        {{ else }}
        <!--没有“追加”编辑过-->
        <span style="font-size: smaller; margin-inline-end: 30px;">
          <a href="/v1/thread/edit?id={{ .Thread.Uuid }}">
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          </a>
        </span>
        {{ end }}
      </div>

    

    </div>
  </div>
  <div class="media-right">
    <a href="/v1/user/biography?id={{ .Thread.User.Uuid }}">
      <img class="img-circle" src="/v1/static/image/{{ .Thread.User.Avatar }}.jpeg" alt="个人头像">
    </a>
  </div>
</div>

<!-- [是茶议作者区域] 展示其他用户的品味-->
{{ range .PostList }}
<!-- [是茶议作者区域] 检查品味的立场以决定布局-->

{{ if .Attitude }}
<!-- [是茶议作者区域] 品味是“颔首”表态，跟随作者，同样是右侧头像布局，寓意站位同一边-->
<div class="media">
  <div class="media-body">
    {{ if .PageData.IsAuthor }}
    <!-- [是茶议作者区域] 特别注意⚠️以下两行是 "或者" 关系，共用一个</div>! -->
    <div class="panel panel-success">
      {{ else }}
    <div class="panel panel-default">
        {{ end }}
        <div class="panel-heading">
          <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              {{ .CreatedAtDate}}
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              <span style="display: block; text-align: center;">
                <span class="label label-danger">{{ .Atti  }}</span>
              </span>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              <span style="display:block;text-align: right;">
                {{ .User.Name }}
              </span>
            </div>
          </div>
        </div>

        <div class="panel-body">
          {{ .Body }}
        </div>

        <div class="panel-footer">
          <span style="margin-inline-end: 30px;">
            <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span>
            {{ .Score }}
          </span>

          {{ if .PageData.IsAuthor }}
          <!--这是作者-->
          {{ if .IsEdited }}
          <!--这是有加水（编辑）过（即补充内容）-->
          <span style="font-size: smaller; margin-inline-end: 30px;">
            <a href="/v1/post/edit?id={{ .Uuid }}">
              <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>

            </a> {{ .EditAtDate }}
          </span>
          {{ else }}
          <!--没有“加水”编辑过-->
          <span style="font-size: smaller; margin-inline-end: 30px;">
            <a href="/v1/post/edit?id={{ .Uuid }}">
              <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
            </a>
          </span>
          {{ end }}
          {{ else }}
          <!--不是作者-->
          {{ if .IsEdited }}
          <!--这是有编辑过-->

          <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          <span style="font-size: smaller; margin-inline-end: 30px;">
            {{ .EditAtDate }}</span>
          {{ else }}
          <!--没有“追加”编辑过，留空白-->
          {{ end }}
          {{ end }}
          <span style="margin-inline-end: 30px;">
            <a href="/v1/post/detail?id={{ .Uuid }}">
              <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
            </a>
            {{ .NumThreads }}
          </span>
        </div>

      </div>
    </div>
    <div class="media-right">
      <a href="/v1/user/biography?id={{ .User.Uuid }}">
        <img class="img-circle" src="/v1/static/image/{{ .User.Avatar }}.jpeg" alt="个人头像">
      </a>
    </div>
  </div>
  {{ else }}
  <!-- [是茶议作者区域] 品味是“摇头”表态，左侧头像布局，寓意站在对面 -->
  <div class="media">
    <div class="media-left">
      <a href="/v1/user/biography?id={{ .User.Uuid }}">
        <img class="img-circle" src="/v1/static/image/{{ .User.Avatar }}.jpeg" alt="个人头像">
      </a>
    </div>
    <div class="media-body">

      {{ if .PageData.IsAuthor }}
      <!--是茶议作者区域，特别注意⚠️以下两行是或者关系，共用一个</div>! -->
      <div class="panel panel-success">
        {{ else }}
      <div class="panel panel-default">
          {{ end }}
          <div class="panel-heading">
            <div class="row">
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                {{ .User.Name }}
              </div>
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <span style="display: block; text-align: center;">
                  <span class="label label-primary">{{ .Atti }}</span>
                </span>

              </div>
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <span style="display:block;text-align: right;">{{ .CreatedAtDate }}</span>
              </div>

            </div>
          </div>

          <div class="panel-body">
            {{ .Body }}
          </div>

          <div class="panel-footer">
            <span style="margin-inline-end: 30px;">
              <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span>
              {{ .Score }}
            </span>

            {{ if .PageData.IsAuthor }}
            <!--这是作者-->
            {{ if .IsEdited }}
            <!--这是有加水（编辑）过（即补充内容）-->
            <span style="font-size: smaller; margin-inline-end: 30px;">
              <a href="/v1/post/edit?id={{ .Uuid }}">
                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>

              </a> {{ .EditAtDate }}
            </span>
            {{ else }}
            <!--没有“加水”编辑过-->
            <span style="font-size: smaller; margin-inline-end: 30px;">
              <a href="/v1/post/edit?id={{ .Uuid }}">
                <span class="glyphicon glyphicon-edit" aria-hidden="true">
                </span>
              </a>
            </span>
            {{ end }}
            {{ else }}
            <!--不是作者-->
            {{ if .IsEdited }}
            <!--这是有编辑过-->
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
            <span style="font-size: smaller; margin-inline-end: 30px;">
              {{ .EditAtDate }}</span>
            {{ else }}
            <!--没有“追加”编辑过，留空白-->
            {{ end }}
            {{ end }}
            <span style="margin-inline-end: 30px;">
              <a href="/v1/post/detail?id={{ .Uuid }}">
                <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
              </a>
              {{ .NumThreads }}
            </span>
          </div>

        </div>
      </div>
    </div>
    {{ end }}
    <!-- [是茶议作者区域] 检测是否品味作者完成-->
    {{ end }}
    <!-- [是茶议作者区域] 展示品味并检查是否品味作者完成-->
  </div>


  <!--  是否茶议主人分割线在此  -->


  {{ else }}
  <!--不是茶议作者区域在这行开始-->

  <!--[不是茶议作者区域] 左danger（红）右primary（蓝）品味进度条-->
  <div class="progress">
    <div class="progress-bar progress-bar-danger progress-bar-striped active" aria-valuenow="{{.ProgressSupport}}"
      aria-valuemin="0" aria-valuemax="100" style="width: {{.ProgressSupport}}%;">
      <span class="sr-only">{{.ProgressSupport}}% 完成 (颔首)</span>
    </div>

    <div class="progress-bar progress-bar-primary progress-bar-striped active" aria-valuenow="{{.ProgressOppose}}"
      aria-valuemin="0" aria-valuemax="100" style="width: {{.ProgressOppose}}%;">
      <span class="sr-only">{{.ProgressOppose}}% 完成 (摇头)</span>
    </div>
  </div>
  <!-- 左红右蓝进度条到此为止 -->

  <!--[不是茶议作者区域] 茶议头像位置显示在左侧布局-->
  <div class="media">
    <div class="media-left">
      <a href="/v1/user/biography?id={{ .Thread.User.Uuid }}">
        <img class="img-circle" src="/v1/static/image/{{ .Thread.User.Avatar }}.jpeg" alt="个人头像">
      </a>
    </div>
    <div class="media-body">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              {{ .Thread.User.Name }}
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              <span style="display: block; text-align: center;">
                <span class="label label-default">{{ .Thread.Status }}</span>
              </span>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
              <span style="display: block; text-align: right;">{{ .Thread.CreatedAtDate }}</span>
            </div>
          </div>
        </div>
        <div class="panel-body">
          <h4>{{ .Thread.TypeStatus }}: {{ .Thread.Title }}</h4>
          {{ .Thread.Body }}
        </div>

        <div class="panel-footer">
          <!--这是茶议表态人数-->
          <span class="glyphicon glyphicon-leaf" aria-hidden="true"></span>
          <span style="margin-inline-end: 30px;">
            {{ .Thread.NumReplies }}
          </span>

          {{ if .Thread.IsEdited }}
          <!--这是有编辑过-->

          <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          <span style="margin-inline-end: 30px;">
            {{ .Thread.EditAtDate }}
          </span>
          {{ else }}
          <!--没有“追加”编辑过，留空白-->
          {{ end }}
        </div>
      </div>
    </div>

      <!--[不是茶议作者区域] 决定是否显示品味编辑区-->
      {{ if .IsInput }}

      <!--[不是茶议作者区域] 这是品味编辑区开始-->
      <div class="panel panel-default">

        <div class="panel-body">
          <form class="form-horizontal" role="form" action="/v1/post/draft" method="post">

            <div class="form-group">
              <fieldset>
                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                  <label>请您品味（17~456字）：</label>
                </div>

                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                  <input type="radio" name="attitude" id="support" style="width: fit-content;" value="true" required />
                  <label for="support">颔首</label>
                </div>

                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                  <input type="radio" name="attitude" id="oppose" value="false" style="width: fit-content;" required />
                  <label for="oppose">摇头</label>
                </div>
              </fieldset>
            </div>

            <div class="form-group">

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <textarea class="form-control" name="body" id="body" rows="3" minlength="17" maxlength="567" required
                  autofocus></textarea>
              </div>
            </div>

            <input type="hidden" name="uuid" value="{{ .Thread.Uuid }}" />

            <div class="col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5">
              <button type="submit" class="btn btn-default">表态</button>
            </div>

          </form>

        </div>

      </div>
      {{ end }}
      <!--[不是茶议作者区域] 品味编辑区结束-->

      <!--展示其他用户的品味-->
      {{ range .PostList }}
      <!--[不是茶议作者区域] 检查品味的立场以决定左右侧布局-->

      {{ if .Attitude }}
      <!--[不是茶议作者区域] 品味是“颔首”表态，左侧头像布局-->
      <div class="media">
        <div class="media-left">
          <a href="/v1/user/biography?id={{ .User.Uuid }}">
            <img class="img-circle" src="/v1/static/image/{{ .User.Avatar }}.jpeg" alt="个人头像">
          </a>
        </div>
        <div class="media-body">

          {{ if .PageData.IsAuthor }}
          <!--[不是茶议作者区域] 特别注意⚠️以下两行是或者关系，共用一个</div>! -->
          <div class="panel panel-success">
            {{ else }}
          <div class="panel panel-default">
              {{ end }}
              <div class="panel-heading">
                <div class="row">
                  <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                    {{ .User.Name }}
                  </div>
                  <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                    <span style="display: block; text-align: center;">
                      <span class="label label-danger">{{ .Atti }}</span>
                    </span>
                  </div>
                  <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                    <span style="display:block;text-align: right;">
                      {{ .CreatedAtDate }}
                    </span>
                  </div>
                </div>
              </div>

              <div class="panel-body">
                {{ .Body }} 
              </div>

              <div class="panel-footer">
                <span style="margin-inline-end: 30px;">
                  <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span>
                  {{ .Score }}
                </span>
                {{ if .PageData.IsAuthor }}

                <!--这是品味作者-->
                {{ if .IsEdited }}
                <!--这是有加水（编辑）过（即补充内容）-->
                <span style="font-size: smaller; margin-inline-end: 30px;">
                  <a href="/v1/post/edit?id={{ .Uuid }}">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                  </a> {{ .EditAtDate }}
                </span>
                {{ else }}
                <!--没有“加水”编辑过-->
                <span style="font-size: smaller; margin-inline-end: 30px;">
                  <a href="/v1/post/edit?id={{ .Uuid }}">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                  </a>
                </span>
                {{ end }}
                {{ else }}
                <!--不是品味作者-->
                {{ if .IsEdited }}
                <!--这是有编辑过-->

                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                <span style="font-size: smaller; margin-inline-end: 30px;">
                  {{ .EditAtDate }}</span>
                {{ else }}
                <!--没有“追加”编辑过，留空白-->
                {{ end }}
                {{ end }}
                <span style="margin-inline-end: 30px;">
                  <a href="/v1/post/detail?id={{ .Uuid }}">
                    <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
                  </a>
                  {{ .NumThreads }}
                </span>
              </div>

            </div>
          </div>
        </div>
        {{ else }}
        <!--[不是茶议作者区域] 品味是“摇头”表态，右侧头像布局-->
        <div class="media">
          <div class="media-body">

            {{ if .PageData.IsAuthor }}
            <!--[不是茶议作者区域] 特别注意⚠️以下两行是或者关系，共用一个</div>!! -->
            <div class="panel panel-success">
              {{ else }}
              <div class="panel panel-default">
                {{ end }}
                <div class="panel-heading">
                  <div class="row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                      {{ .CreatedAtDate }}
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                      <span style="display: block; text-align: center;">
                        <span class="label label-primary">{{ .Atti }}</span>
                      </span>
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                      <span style="display:block;text-align: right;">{{ .User.Name }}</span>
                    </div>
                  </div>
                </div>

                <div class="panel-body">
                  {{ .Body }} 
                </div>

                <div class="panel-footer">
                  <span style="margin-inline-end: 30px;">
                    <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span>
                    {{ .Score }}
                  </span>

                  {{ if .PageData.IsAuthor }}
                  <!--这是品味作者-->
                  {{ if .IsEdited }}
                  <!--这是有加水（编辑）过（即补充内容）-->
                  <span style="font-size: smaller; margin-inline-end: 30px;">
                    <a href="/v1/post/edit?id={{ .Uuid }}">
                      <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </a> {{ .EditAtDate }}
                  </span>
                  {{ else }}
                  <!--没有“加水”编辑过-->
                  <span style="margin-inline-end: 30px;">
                    <a href="/v1/post/edit?id={{ .Uuid }}">
                      <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </a>
                  </span>
                  {{ end }}
                  {{ else }}
                  <!--不是品味作者-->
                  {{ if .IsEdited }}
                  <!--这是有编辑过-->

                  <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                  <span style="font-size: smaller; margin-inline-end: 30px;">
                    {{ .EditAtDate }}</span>
                  {{ else }}
                  <!--没有“追加”编辑过，留空白-->
                  {{ end }}
                  {{ end }}
                  <span style="margin-inline-end: 30px;">
                    <a href="/v1/post/detail?id={{ .Uuid }}">
                      <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
                    </a>
                    {{ .NumThreads }}
                  </span>
                </div>

              </div>
            </div>
            <div class="media-right">
              <a href="/v1/user/biography?id={{ .User.Uuid }}">
                <img class="img-circle" src="/v1/static/image/{{ .User.Avatar }}.jpeg" alt="个人头像">
              </a>
            </div>

          </div>
          {{ end }}
          <!--[不是茶议作者区域] 检测是否品味作者完成-->

          {{ end }}
          <!--[不是茶议作者区域] 展示全部品味完成-->
        {{ end }}
        <!--全局检查是否茶议作者，以决定头像位置布局结束-->

        <div class="well">
          <a href="#">更多相关茶议 >></a>
        </div>

        {{ end }}